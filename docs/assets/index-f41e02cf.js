(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function o(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(i){if(i.ep)return;i.ep=!0;const r=o(i);fetch(i.href,r)}})();const m=new Audio("./sounds/Music.mp3"),T=new Audio("./sounds/Ded.wav"),x=new Audio("./sounds/Click.wav"),E=new Audio("./sounds/Win.wav"),L=new Audio("./sounds/chain.wav"),k=new Audio("./sounds/Flag.wav"),M=new Audio("./sounds/Unflag.wav"),W=new Audio("./sounds/First.wav"),A=["white","blue","green","red","purple","cyan","tomato","brown","black","papayawhip"],y=[[-1,0],[-1,1],[-1,-1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];function v(e){e.won===!0?(e.events.innerText="Congrats, you get notong. Click to start over",e.events.style.color="green"):(e.events.innerText="Congrats, you suck. Click to retry",e.events.style.color="red")}function N(e){e.squares===0&&(e.won=!0,E.play(),m.pause(),p(e),v(e))}function h(e,n,o){e.squares--,e.papayaWhip[n][o]=1,N(e)}function S(e,n){document.body.style.transform="translate("+(Math.random()*3-1.5)+"%,"+(Math.random()*3-1.5)+"%)",n>=0?setTimeout(function(){S(e,n-1)},10):document.body.style.transform=""}function w(e,n,o){S(e,40);for(const[l,i]of y)n+i<e.height&&n+i>=0&&o+l<e.width&&o+l>=0&&e.papayaWhip[n+i][o+l]===0&&(h(e,n+i,o+l),e.grid[n+i][o+l]===0&&w(e,n+i,o+l));L.play()}function O(e,n,o){e.grid[n][o]===-1?(e.won=!1,m.pause(),T.play(),p(e),v(e)):(x.play(),h(e,n,o),e.grid[n][o]===0&&w(e,n,o),p(e))}function b(e,n,o){e.papayaWhip[n][o]===2?(M.play(),e.papayaWhip[n][o]=0,e.minesLeft+=1,e.minesLeftElement.innerText=e.minesLeft.toString()):(k.play(),e.papayaWhip[n][o]=2,e.minesLeft-=1,e.minesLeftElement.innerText=e.minesLeft.toString()),p(e)}function F(e){const n=document.createElement("div");return n.innerText="ðŸš©",n.style.width="50px",n.style.height="50px",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.borderWidth="3px",n.style.borderColor="grey",n.style.borderStyle="solid",n.addEventListener("click",function(){e.onOff===!1?(e.onOff=!0,n.style.background="green"):(e.onOff=!1,n.style.background="white"),p(e)}),n}const g=+(localStorage.getItem("Highscore")??0);function C(){const e=document.createElement("div");e.innerText="0";const n=document.createElement("div");n.innerText="nan",g<100?n.style.color="rgb("+(255-g*2.55)+","+g*2.55+",0)":n.style.color="rgb(0,255,0)",g&&(n.innerText=g.toString());function o(l){setInterval(function(){l.won===0?l.tick++:l.won===!0&&(localStorage.getItem("Highscore")?g>l.tick&&localStorage.setItem("Highscore",l.tick.toString()):localStorage.setItem("Highscore",l.tick.toString())),e.innerText=l.tick.toString()},1e3)}return[e,o,n]}const[I,X,H]=C();document.body.append(I);document.body.append(H);function P(e,n,o){m.loop=!0,m.play(),W.play(),e.gameStarted=!0;for(let l=0;l<e.mines;l++){const i=Math.floor(Math.random()*e.width),r=Math.floor(Math.random()*e.height);let s=!1;for(const[u,a]of y)r+a<e.height&&r+a>=0&&i+u<e.width&&i+u>=0&&(r+a===n&&i+u==o||r===n&&i==o)&&(s=!0);if(e.grid[r][i]===-1||s===!0)l--,console.log("Yesent");else{e.grid[r][i]=-1;for(const[u,a]of y)r+a<e.height&&r+a>=0&&i+u<e.width&&i+u>=0&&e.grid[r+a][i+u]!==-1&&(e.grid[r+a][i+u]++,console.log("yes"))}}h(e,n,o),w(e,n,o),X(e),p(e),document.body.append(F(e))}function p(e){var n;for(let o=0;o<e.height;o++)(n=e.board.firstChild)==null||n.remove();for(let o=0;o<e.height;o++){const l=document.createElement("div");l.style.display="flex",e.board.append(l);for(let i=0;i<e.width;i++){console.log("ye");const r=document.createElement("div");l.append(r),r.addEventListener("click",function(){e.won===0&&(e.gameStarted===!1?(P(e,o,i),e.minesLeftElement.innerText=e.minesLeft.toString()):e.onOff===!1?e.papayaWhip[o][i]==0&&O(e,o,i):e.papayaWhip[o][i]!==1&&b(e,o,i))}),r.addEventListener("contextmenu",function(s){e.won===0&&(console.log("right"),s.preventDefault(),e.papayaWhip[o][i]!==1&&b(e,o,i))}),r.style.width="30px",r.style.height="30px",r.style.borderWidth="2px",r.style.borderColor="grey",r.style.borderStyle="solid",r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",e.onOff===!0&&(r.innerText="."),e.papayaWhip[o][i]===2?(e.won===0&&(r.innerText="ðŸš©"),e.won===!1?e.grid[o][i]!==-1?(r.style.color="red",r.innerText="X"):r.innerText="ðŸš©":e.grid[o][i]===-1&&e.won===!0&&(r.innerText="ðŸš©",r.style.background="green")):e.papayaWhip[o][i]===1?(e.grid[o][i]!==0&&(r.innerText=e.grid[o][i].toString()),r.style.background="lightgrey",r.style.color=A[e.grid[o][i]]):e.won===!1?e.grid[o][i]===-1&&(r.innerText="ðŸ’£",r.style.background="red"):e.grid[o][i]===-1&&e.won===!0&&(r.innerText="ðŸš©",r.style.background="green")}}}let t=+prompt("Height?-min 4-max 30");t=Math.floor(t);console.log(t);t>30?t=30:(t<4||Number.isNaN(t)===!0)&&(t=4);let c=+prompt("Width?-min 4-max 30");c=Math.floor(c);console.log(c);c>30?c=30:(c<4||Number.isNaN(c)===!0)&&(c=4);let f=+prompt("Mines?");f=Math.floor(f);console.log(f);f>c*t-9?f=c*t-9:(f<0||Number.isNaN(f)===!0)&&(f=Math.floor((c*t-9)/6.9));function q(e,n,o){return{board:document.createElement("div"),gameStarted:!1,grid:Array(n).fill(0).map(()=>Array(e).fill(0)),height:n,width:e,papayaWhip:Array(n).fill(0).map(()=>Array(e).fill(0)),mines:o,minesLeft:o,minesLeftElement:document.createElement("div"),onOff:!1,squares:n*e-o,thing:0,tick:0,won:0,events:document.createElement("div")}}const d=q(c,t,f);document.body.append(d.events);d.events.innerText="E";document.body.append(d.minesLeftElement);d.minesLeftElement.innerText="Press to start";document.body.append(d.board);p(d);window.addEventListener("click",function(){d.won!==0&&(d.thing>0?window.location.reload():d.thing++)});
